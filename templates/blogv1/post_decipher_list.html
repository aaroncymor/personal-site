{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container">
  <h3 class="center-align">Decipher</h3>
  {% if deciphers %}
    {% for decipher in deciphers %}
      <div class="row">
        <p class="aaroncymor-decipher-name">{{ decipher.name }}</p>
        {% if is_paginated %}
          {% if request.session.authorized %}
            <a href="{% url 'post-decipher-form' post.id decipher.id %}">Edit</a>
          {% endif %}
        {% else %}
          {% if request.session.authorized %}
            <a href="{% url 'post-decipher-form' post.id decipher.id %}">Edit</a>
          {% endif %}
        {% endif%}
      </div>
      <div class="divider"></div>
    {% endfor %}

    {% if is_paginated %}
    <div class="row">
      <ul class="pagination">
        {% if page_obj.has_previous %}
        <li>
          <a href="{% url 'post-decipher-list' %}?page={{ page_obj.previous_page_number }}">
            <i class="material-icons">chevron_left</i>
          </a>
        </li>
        {% else %}
        <li class="disabled">
          <a href="#!">
            <i class="material-icons">chevron_left</i>
          </a>
        </li>            
        {% endif %}

        {% for i in paginator.page_range %}
          {% if page_obj.number == i %}
          <li class="active">
            <a href="#!">{{ i }}</a>
          </li>
          {% else %}
          <li>
            <a href="{% url 'post-decipher-list' post.id %}?page={{ i }}">{{ i }}</a>
          </li>
          {% endif %}
        {% endfor %}

        {% if page_obj.has_next %}
        <li>
          <a href="{% url 'post-decipher-list' post.id %}?page={{ page_obj.next_page_number }}">
            <i class="material-icons">chevron_right</i>
          </a>
        </li>
        {% else %}
        <li class="disabled">
          <a href="#!">
            <i class="material-icons">chevron_right</i>
          </a>
        </li>
        {% endif %}
      </ul>
    </div>
    {% endif %}
  {% else %}
    No deciphers for this post!
  {% endif %}
  <div class="row">
    {% if prev_page_session %}
      <a href="{% url 'post-form' %}?id={{ post.id }}&prev_page_session={{ prev_page_session }}">Back</a>
    {% else %}
    <a href="{% url 'post-form' %}?id={{ post.id }}">Back</a>
    {% endif %}
  </div>
</div>
{% endblock content %}